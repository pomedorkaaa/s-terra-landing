let modulesKids = [
  {
    heading: "Модуль 1: Введение в веб-технологии и основы HTML",
    data: [
      {
        title: "Введение в веб-разработку",
        elements: [
          "Роль фронтенд-разработки в создании веб-приложений",
          "Обзор современных технологий",
        ],
      },
      {
        title: "Основы HTML",
        elements: [
          "Структура HTML-документа",
          "Работа с тегами и атрибутами",
          "Формы и их элементы",
        ],
      },
      {
        title: "Семантическая разметка",
        elements: [
          "Значение семантических тегов",
          "Создание доступных и поисковых оптимизированных страниц",
        ],
      },
    ],
  },
  {
    heading: "Модуль 2: Основы CSS и стилизация веб-страниц",
    data: [
      {
        title: "Основы CSS",
        elements: [
          "Введение в каскадные таблицы стилей (CSS)",
          "Селекторы, свойства и значения",
          "Основные единицы измерения в CSS",
        ],
      },
      {
        title: "Структура и стилизация веб-страниц",
        elements: [
          "Разделение содержания и представления",
          "Применение стилей к HTML-элементам",
          "Позиционирование и блочная модель",
        ],
      },
      {
        title: "Адаптивная и отзывчивая веб-вёрстка",
        elements: [
          "Медиа-запросы и поддержка различных устройств",
          "Гибкий дизайн с использованием flexbox и grid",
        ],
      },
    ],
  },
  {
    heading: "Модуль 3: Основы JavaScript и взаимодействие с DOM",
    data: [
      {
        title: "Введение в JavaScript",
        elements: [
          "Основы синтаксиса и типы данных",
          "Обзор современных технологий",
        ],
      },
      {
        title: "Объектная модель документа (DOM)",
        elements: [
          "Связь JavaScript с HTML через DOM",
          "Манипуляции с элементами и их атрибутами",
        ],
      },
      {
        title: "События и обработка событий",
        elements: [
          "Взаимодействие с пользовательским вводом",
          "Обработка событий и делегирование",
        ],
      },
    ],
  },
  {
    heading: "Модуль 4: Фреймворки и библиотеки",
    data: [
      {
        title: "Роль фреймворков и библиотек в веб-разработке",
        elements: [
          "Понятие фреймворков и библиотек",
          "Примеры популярных фреймворков и библиотек",
        ],
      },
      {
        title: "Использование фреймворков для создания веб-приложений",
        elements: [
          "Преимущества и недостатки различных фреймворков",
          "Сборка проекта с использованием фреймворков",
        ],
      },
    ],
  },
  {
    heading: "Модуль 5: Оптимизация производительности и отладка",
    data: [
      {
        title: "Оптимизация загрузки и отображения веб-страниц",
        elements: [
          "Минификация и сжатие ресурсов",
          "Асинхронная загрузка и кэширование",
        ],
      },
      {
        title: "Инструменты отладки и профилирования",
        elements: [
          "Использование браузерных инструментов разработчика",
          "Профилирование и анализ производительности",
        ],
      },
    ],
  },
  {
    heading: "Модуль 6: Введение в тестирование и сборка проектов",
    data: [
      {
        title: "Основы тестирования в веб-разработкеу",
        elements: [
          "Виды тестирования: модульное, интеграционное, функциональное",
          "Инструменты для автоматизации тестирования",
        ],
      },
      {
        title: "Сборка проектов и использование систем контроля версий",
        elements: [
          "Интеграция сборочных инструментов",
          "Работа с Git и основы систем контроля версий",
        ],
      },
    ],
  },
  {
    heading: "Модуль 7: Завершающий проект и практика",
    data: [
      {
        title: "Разработка завершающего проекта",
        elements: [
          "Применение полученных знаний в реальном проекте",
          "Создание полноценного веб-приложения",
        ],
      },
      {
        title: "Практика и самостоятельное развитие",
        elements: [
          "Задачи для самостоятельного выполнения",
          "Поддержка и улучшение созданных проектов",
        ],
      },
    ],
  },
];

let modulesAdults = [
  {
    heading: "Модуль 1: Введение в веб-технологии и основы HTML",
    data: [
      {
        title: "Введение в веб-разработку",
        elements: [
          "Роль фронтенд-разработки в создании веб-приложений",
          "Обзор современных технологий",
        ],
      },
      {
        title: "Основы HTML",
        elements: [
          "Структура HTML-документа",
          "Работа с тегами и атрибутами",
          "Формы и их элементы",
        ],
      },
      {
        title: "Семантическая разметка",
        elements: [
          "Значение семантических тегов",
          "Создание доступных и поисковых оптимизированных страниц",
        ],
      },
    ],
  },
  {
    heading: "Модуль 2: Основы CSS и стилизация веб-страниц",
    data: [
      {
        title: "Основы CSS",
        elements: [
          "Введение в каскадные таблицы стилей (CSS)",
          "Селекторы, свойства и значения",
          "Основные единицы измерения в CSS",
        ],
      },
      {
        title: "Структура и стилизация веб-страниц",
        elements: [
          "Разделение содержания и представления",
          "Применение стилей к HTML-элементам",
          "Позиционирование и блочная модель",
        ],
      },
      {
        title: "Адаптивная и отзывчивая веб-вёрстка",
        elements: [
          "Медиа-запросы и поддержка различных устройств",
          "Гибкий дизайн с использованием flexbox и grid",
        ],
      },
    ],
  },
  {
    heading: "Модуль 3: Основы JavaScript и взаимодействие с DOM",
    data: [
      {
        title: "Введение в JavaScript",
        elements: [
          "Основы синтаксиса и типы данных",
          "Обзор современных технологий",
        ],
      },
      {
        title: "Объектная модель документа (DOM)",
        elements: [
          "Связь JavaScript с HTML через DOM",
          "Манипуляции с элементами и их атрибутами",
        ],
      },
      {
        title: "События и обработка событий",
        elements: [
          "Взаимодействие с пользовательским вводом",
          "Обработка событий и делегирование",
        ],
      },
    ],
  },
  {
    heading: "Модуль 4: Фреймворки и библиотеки",
    data: [
      {
        title: "Роль фреймворков и библиотек в веб-разработке",
        elements: [
          "Понятие фреймворков и библиотек",
          "Примеры популярных фреймворков и библиотек",
        ],
      },
      {
        title: "Использование фреймворков для создания веб-приложений",
        elements: [
          "Преимущества и недостатки различных фреймворков",
          "Сборка проекта с использованием фреймворков",
        ],
      },
    ],
  },
  {
    heading: "Модуль 5: Оптимизация производительности и отладка",
    data: [
      {
        title: "Оптимизация загрузки и отображения веб-страниц",
        elements: [
          "Минификация и сжатие ресурсов",
          "Асинхронная загрузка и кэширование",
        ],
      },
      {
        title: "Инструменты отладки и профилирования",
        elements: [
          "Использование браузерных инструментов разработчика",
          "Профилирование и анализ производительности",
        ],
      },
    ],
  },
  {
    heading: "Модуль 6: Введение в тестирование и сборка проектов",
    data: [
      {
        title: "Основы тестирования в веб-разработкеу",
        elements: [
          "Виды тестирования: модульное, интеграционное, функциональное",
          "Инструменты для автоматизации тестирования",
        ],
      },
      {
        title: "Сборка проектов и использование систем контроля версий",
        elements: [
          "Интеграция сборочных инструментов",
          "Работа с Git и основы систем контроля версий",
        ],
      },
    ],
  },
  {
    heading: "Модуль 7: Завершающий проект и практика",
    data: [
      {
        title: "Разработка завершающего проекта",
        elements: [
          "Применение полученных знаний в реальном проекте",
          "Создание полноценного веб-приложения",
        ],
      },
      {
        title: "Практика и самостоятельное развитие",
        elements: [
          "Задачи для самостоятельного выполнения",
          "Поддержка и улучшение созданных проектов",
        ],
      },
    ],
  },
];

class Portfolio extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      isKidsModule: true,
      opened: null,
    };
  }

  // componentDidUpdate() {
  //   console.log(`открыт ${this.state.opened} модуль`);
  // }
  resetModules(index) {
    if (index != null) {
      let _module_data =
        document.getElementById("modules").children[2].children[index]
          .children[1];
      let _module_btn = _module_data.parentElement.children[0].children[1];
      // console.log(this.state.opened);
      // console.log(_module_btn);

      if (_module_data.classList.length > 0) {
        _module_data.classList.remove("module-active");
        _module_btn.classList.remove("module-btn-active");
      }
      _module_data.style.maxHeight = 0;
      _module_data.style.marginTop = 0;
      // _module.style.backgroundColor = "red";
    }
  }
  renderModules(arr) {
    // console.log(`перед рендером state = ${this.state.opened}`);
    // if (this.state.opened != null) {
    //   this.resetModules(this.state.opened);
    // }
    // this.resetModules(this.state.opened);
    // this.setState({ opened: null });
    return arr.map(({ heading, data }, index) => {
      return (
        <div className="module">
          <div className="module-heading">
            <p className="p1 semibold">{heading}</p>
            <button
              id={`module-${index}`}
              onClick={() => {
                let btn_id = event.target.id.replace("module-", "");
                // console.log(btn_id);
                let btn = document.getElementById(event.target.id);
                let modules =
                  btn.parentElement.parentElement.parentElement.children;
                let moduleActive = btn.parentElement.nextElementSibling;

                // console.log(modules);

                let op = this.state.opened;

                if (op != btn_id) {
                  if (op != null) {
                    modules[op].children[1].classList.remove("module-active");
                    modules[op].children[1].style.maxHeight = 0;
                    modules[op].children[0].children[1].classList.remove(
                      "module-btn-active"
                    );
                  }

                  this.state.opened = +btn_id;
                  // console.log(`state = ${this.state.opened}`);
                  moduleActive.classList.add("module-active");
                  moduleActive.style.maxHeight = `${moduleActive.scrollHeight}px`;
                  moduleActive.style.marginTop = "15px";
                } else {
                  this.state.opened = null;
                  // console.log(`state = ${this.state.opened}`);
                  moduleActive.classList.remove("module-active");
                  moduleActive.style.maxHeight = 0;
                  moduleActive.style.marginTop = 0;
                }

                btn.classList.toggle("module-btn-active");
              }}
            ></button>
          </div>
          <div className="module-data" id={`module-data-${index}`}>
            {data.map(({ title, elements }) => {
              return (
                <>
                  <ul className="p2">{title}</ul>
                  {elements.map((item) => {
                    return <li className="p2">{item}</li>;
                  })}
                </>
              );
            })}
          </div>
        </div>
      );
    });
  }

  render() {
    return (
      <>
        <div className="auditory-btns">
          <button
            id="auditory-btn-kids"
            onClick={() => {
              // console.log(event.target.id);
              this.resetModules(this.state.opened);
              this.state.opened = null;
              this.setState({ isKidsModule: true });
              // console.log(this.state.opened);
            }}
            className={this.state.isKidsModule ? "auditory-btn-active" : ""}
          >
            Для детей
          </button>
          <button
            id="auditory-btn-adults"
            onClick={() => {
              this.resetModules(this.state.opened);
              this.state.opened = null;
              this.setState({ isKidsModule: false });
              // console.log(this.state.opened);
            }}
            className={this.state.isKidsModule ? "" : "auditory-btn-active"}
          >
            Для взрослых
          </button>
        </div>
        <p class="p1">
          {this.state.isKidsModule
            ? "Интерактивные курсы, направленные на введение в основы HTML, CSS и JavaScript. Занятия включают в себя игровые элементы, которые делают обучение увлекательным и эффективным."
            : "Курсы обучения для взрослой аудитории, направленные на освоение базовых принципов HTML, CSS и JavaScript. Программа акцентирует внимание на систематичном и глубоком изучении тематики, обеспечивая профессиональный и осознанный подход к усвоению ключевых концепций веб-разработки."}
        </p>
        <div className="modules">
          {this.state.isKidsModule
            ? this.renderModules(modulesKids)
            : this.renderModules(modulesAdults)}
        </div>
      </>
    );
  }
}

ReactDOM.render(<Portfolio />, document.getElementById("modules"));
